(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function a(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=a(s);fetch(s.href,i)}})();const c=["easy","medium","hard"],b={mistake:"MISTAKE",win:"WIN_ROUND"},p={START:"Switch to English keyboard layout",[b.win]:"You passed the round! =)",[b.mistake]:"You are wrong! =(",WIN:"YOU WIN",LOSE:"GAME OVER",CHANGE_LAYOUT:"Change the keyboard layout, please. The layout is Russian now.",SIMON_SAYS:"Simon says: "},A=5,l={HIDDEN:"display-none",[b.win]:"outputFieldFinish",[b.mistake]:"outputFieldMistake",HIGHLIGHT_BUTTON:"actionButtonHighlight",BUTTON_ACTIVE:"buttonKeyboardActive",NON_INTERACTIVE:"no-pointer-events",OPACITY_0:"opacity"},x={firstChar:"а",lastChar:"я"},B={firstCharCode:48,lastCharCode:57},O={firstCharCode:97,lastCharCode:122},d={duration:1e3,easing:"ease-out",delay:300,transform:{base:"scale(1)",active:"scale(1.2)"},background:{base:"var(--primary-alpha)",active:"var(--dark)"}},n={roundCounter:0,level:c[0],isPlaying:!1,isMistake:!1,isPressed:!1,isClicked:!1,sequenceArray:[],sequenceButtons:[],sequence:""},o={actionButtons:{},buttonWrapper:null,keyboardWrapper:null,keyboards:{[c[0]]:{},[c[1]]:{},[c[2]]:{}},levelButtons:{[c[0]]:{},[c[1]]:{},[c[2]]:{}},modal:{},outputField:null,roundCounter:null,roundWrapper:null};function u({tagName:e="div",classList:t=[],textContent:a="",attributes:r={}}={}){const s=document.createElement(e);return t.length>0&&s.classList.add(...t),a&&(s.textContent=a),r&&Object.entries(r).forEach(([i,f])=>s.setAttribute(i,f)),s}function v(){o.outputField.classList.remove(l.MISTAKE),o.outputField.classList.remove(l.WIN_ROUND)}function N(e){n.isMistake=!1,o.roundCounter.textContent=n.roundCounter,o.actionButtons.repeat.disabled=!1,v(),Object.entries(o.actionButtons).forEach(([t,a])=>{if(e?t!=="start":t==="start"||t==="next"){a.classList.add(l.HIDDEN);return}a.classList.remove(l.HIDDEN)})}function g(e,t,a=!1){const r=u({tagName:"button",classList:["button","actionButton"],textContent:e});return a&&r.classList.add(l.HIGHLIGHT_BUTTON),r.addEventListener("click",t),r}function y(e,t){t.forEach(a=>{Object.values(a).forEach(r=>{r.textContent==="Repeat the sequence"&&n.isMistake||(r.disabled=e)})})}function I(e){const t=u({tagName:"li"}),a=u({tagName:"input",classList:[l.HIDDEN],attributes:{type:"radio",name:"level",id:e}});o.levelButtons[e]=a;const r=u({tagName:"label",classList:["button","tabButton"],textContent:e,attributes:{for:e}});return t.append(a,r),t.addEventListener("click",()=>{a.disabled||(n.level=e)}),t}function S(e){const t=u({tagName:"ul",classList:["flex","flex--justify-center","flex_gap-20","levelList"]}),a={};return e.forEach(r=>{a[r]=I(r)}),t.append(...Object.values(a)),t}function E(e){n.isPlaying=!1;let t=0;function a(){if(t>=e.length){y(!1,[o.keyboards[n.level],o.actionButtons]),n.isPlaying=!0;return}const s=e[t].animate([{backgroundColor:d.background.base,transform:d.transform.base},{backgroundColor:d.background.active,transform:d.transform.active},{backgroundColor:d.background.base,transform:d.transform.base}],{duration:d.duration,easing:d.easing,delay:d.delay});s.onfinish=()=>{t++,a()}}a()}function w(){const e=n.roundCounter*2,t=o.keyboards[n.level],a=Object.values(t).length;n.sequenceButtons=[];for(let r=0;r<e;r++){const s=Math.floor(Math.random()*a),i=Object.keys(t)[s];n.sequenceArray.push(i),n.sequenceButtons.push(t[i])}n.sequence=n.sequenceArray.join(""),console.log(p.SIMON_SAYS,n.sequenceArray),E(n.sequenceButtons)}function h(){n.roundCounter++,n.roundCounter===1&&(y(!0,[o.levelButtons]),o.roundWrapper.classList.remove(l.OPACITY_0)),N(!1),y(!0,[o.keyboards[n.level],o.actionButtons]),o.actionButtons.repeat.classList.remove(l.HIGHLIGHT_BUTTON),o.outputField.textContent=p.SIMON_SAYS,w()}function C(){n.roundCounter=0,o.roundWrapper.classList.add(l.OPACITY_0),o.levelButtons[n.level].checked=!0,n.sequenceArray=[],o.outputField.textContent=p.START,y(!1,[o.levelButtons]),n.isPlaying=!1,y(!0,[o.keyboards.hard]),N(!0)}function _(){n.isPressed||(y(!0,[o.keyboards[n.level],o.actionButtons]),E(n.sequenceButtons),n.isMistake=!0,o.actionButtons.repeat.classList.remove(l.HIGHLIGHT_BUTTON),v(),o.outputField.textContent=p.SIMON_SAYS,n.sequenceArray=n.sequence.split(""),o.actionButtons.repeat.disabled=!0)}function H(){const e={};return e.start=g("start",h),e.newGame=g("newGame",()=>{n.isPressed||C()}),e.repeat=g("Repeat the sequence",_),e.next=g("next",h,!0),e}function k(){o.modal.text.textContent=n.sequenceArray.length===0?p.WIN:p.LOSE,o.modal.word.textContent=n.sequence.toUpperCase(),o.modal.modal.showModal()}function W(){const e=u({tagName:"dialog",classList:["modal","flex","flex--column","flex--align-center","flex_gap-20"]}),t=u({tagName:"button",classList:["closeButton"],textContent:"❌"}),a=g("newGame",()=>{e.close(),C()}),r=u({tagName:"p"}),s=u({tagName:"p",textContent:"Simon says: "}),i=u({tagName:"strong"});return s.append(i),e.append(t,r,s,a),t.addEventListener("click",()=>e.close()),a.addEventListener("click",()=>{e.close(),C()}),{modal:e,text:r,word:i}}function M(){const e={};e.container=u({classList:["container","flex","flex--column","flex--align-justify-center","flex_gap-30"]}),e.headerPrimary=u({tagName:"h1",textContent:"simon says",classList:["header-primary"]}),e.flexDiv=u({classList:["flex","flex--align-justify-center","flex_gap-10","flexDiv"]}),e.roundWrapper=u({tagName:"p",textContent:"Round: ",classList:["roundWrapper"]}),e.roundCounter=u({tagName:"span",textContent:"0",classList:["counter-text"]}),e.roundText=u({tagName:"span",textContent:" / 5",classList:["counter-text"]}),e.roundWrapper.append(e.roundCounter,e.roundText),e.levelList=S(c),e.keyboardWrapper=u({classList:["flex","flex--wrap","flex_gap-10","keyboardWrapper","flex--align-justify-center"]}),e.outputField=u({tagName:"p",classList:["outputField"],textContent:p.START}),e.buttonWrapper=u({classList:["flex","flex_gap-20","flex--align-justify-center"]}),e.actionButtons=H(),e.buttonWrapper.append(...Object.values(e.actionButtons)),e.flexDiv.append(e.outputField,e.roundWrapper),e.container.append(e.headerPrimary,e.flexDiv,e.levelList,e.keyboardWrapper,e.buttonWrapper),e.modal=W(),document.body.append(e.container,e.modal.modal),o.keyboardWrapper=e.keyboardWrapper,o.roundCounter=e.roundCounter,o.roundWrapper=e.roundWrapper,o.actionButtons=e.actionButtons,o.modal=e.modal,o.outputField=e.outputField,o.buttonWrapper=e.buttonWrapper}function T(e){const t=e?l.HIGHLIGHT_BUTTON:l.HIDDEN,a=e?b.mistake:b.win;e?n.isMistake=e:o.actionButtons.next.classList.remove(l.HIDDEN),o.outputField.textContent=p[a],o.outputField.classList.add(l[a]),o.actionButtons.repeat.classList.add(t),n.isPlaying=!1,y(!0,[o.keyboards[n.level]])}function q(){n.sequenceArray.length===0&&(n.isPlaying=!1,n.roundCounter!==A?T(!1):(o.actionButtons.repeat.disabled=!0,k()))}function D(e){const t=e===n.sequenceArray[0];!t&&n.isMistake&&k(),t?(o.outputField.textContent+=e,n.sequenceArray.shift()):T(!0),q()}let m;function L(e,t,a=!0){o.keyboardWrapper.classList.toggle(l.NON_INTERACTIVE,e),a&&(t==="mouse"?n.isClicked=e:n.isPressed=e)}function U(e){if(n.isPressed||!n.isPlaying||n.isClicked)return;if(m=e.key.toLowerCase(),m>=x.firstChar&&m<=x.lastChar){console.log(p.CHANGE_LAYOUT);return}if(!o.keyboards[n.level][m])return;const t=o.keyboards[n.level][m];t.classList.add(l.BUTTON_ACTIVE),L(!0,"keyboard");const a=new MouseEvent("mousedown");t.dispatchEvent(a)}function G(e){m!==e.key.toLowerCase()||!n.isPressed||(o.keyboards[n.level][m].classList.remove(l.BUTTON_ACTIVE),L(!1,"keyboard"))}function P(e,t){e.button!==0||n.isPressed&&e.isTrusted||(L(!0,"mouse",e.isTrusted),D(t))}function F(e){!(n.isClicked&&e.button===0)||n.isPressed||L(!1,"mouse")}function R(e,t,a){const r=String.fromCharCode(e),s=u({tagName:"button",classList:["button","buttonKeyboard"]}),i=u({tagName:"p",classList:["keyboardText"],textContent:r});return s.append(i),t[c[2]][r]=s,t[a][r]=s,s.addEventListener("mousedown",f=>{P(f,r)}),s}function Y(e){const t={};t.numbers=u({classList:["numbers","flex","flex--wrap","flex_gap-10"]}),t.letters=u({classList:["letters","flex","flex--wrap","flex_gap-10"]}),e.keyboardWrapper.append(t.numbers,t.letters),[{range:B,wrapper:t.numbers,level:c[0]},{range:O,wrapper:t.letters,level:c[1]}].forEach(r=>{for(let s=r.range.firstCharCode;s<=r.range.lastCharCode;s++){const i=R(s,e.keyboards,r.level);r.wrapper.append(i)}})}function j(){Y(o),window.addEventListener("keydown",U),window.addEventListener("keyup",G),window.addEventListener("mouseup",F)}function K(){M(),j(),C()}K();
//# sourceMappingURL=main-CmBM19LW.js.map
